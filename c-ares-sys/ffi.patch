--- src/ffi.rs.orig	2017-02-03 19:33:21.296302635 +0000
+++ src/ffi.rs	2017-02-03 19:35:28.759185538 +0000
@@ -1,4 +1,12 @@
 /* automatically generated by rust-bindgen */
+#![allow(non_camel_case_types, non_snake_case)]
+use c_types::fd_set;
+use c_types::hostent;
+use c_types::in_addr;
+use c_types::sockaddr;
+use c_types::socklen_t;
+use libc::iovec;
+use libc::timeval;
 
 #[repr(C)]
 pub struct __BindgenUnionField<T>(::std::marker::PhantomData<T>);
@@ -25,7 +33,11 @@
     }
 }
 pub type ares_socklen_t = socklen_t;
-pub type ares_socket_t = ::std::os::raw::c_int;
+#[cfg(windows)]
+pub type ares_socket_t = ::std::os::windows::io::RawSocket;
+#[cfg(unix)]
+pub type ares_socket_t = ::std::os::unix::io::RawFd;
+
 pub type ares_sock_state_cb =
     ::std::option::Option<unsafe extern "C" fn(data:
                                                    *mut ::std::os::raw::c_void,
@@ -59,14 +71,12 @@
     pub nsort: ::std::os::raw::c_int,
     pub ednspsz: ::std::os::raw::c_int,
 }
-#[test]
-fn bindgen_test_layout_ares_options() {
-    assert_eq!(::std::mem::size_of::<ares_options>() , 104usize);
-    assert_eq!(::std::mem::align_of::<ares_options>() , 8usize);
-}
 impl Clone for ares_options {
     fn clone(&self) -> Self { *self }
 }
+impl Default for ares_options {
+    fn default() -> Self { unsafe { ::std::mem::zeroed() } }
+}
 #[repr(C)]
 #[derive(Debug, Copy, Clone)]
 pub struct ares_channeldata([u8; 0]);
@@ -247,11 +257,6 @@
                                                                *mut ::std::os::raw::c_void)
                                           -> ::std::os::raw::c_long>,
 }
-#[test]
-fn bindgen_test_layout_ares_socket_functions() {
-    assert_eq!(::std::mem::size_of::<ares_socket_functions>() , 40usize);
-    assert_eq!(::std::mem::align_of::<ares_socket_functions>() , 8usize);
-}
 impl Clone for ares_socket_functions {
     fn clone(&self) -> Self { *self }
 }
@@ -379,35 +384,18 @@
     pub _S6_u8: __BindgenUnionField<[::std::os::raw::c_uchar; 16usize]>,
     pub bindgen_union_field: [u8; 16usize],
 }
-#[test]
-fn bindgen_test_layout_ares_in6_addr__bindgen_ty_1() {
-    assert_eq!(::std::mem::size_of::<ares_in6_addr__bindgen_ty_1>() ,
-               16usize);
-    assert_eq!(::std::mem::align_of::<ares_in6_addr__bindgen_ty_1>() ,
-               1usize);
-}
 impl Clone for ares_in6_addr__bindgen_ty_1 {
     fn clone(&self) -> Self { *self }
 }
-#[test]
-fn bindgen_test_layout_ares_in6_addr() {
-    assert_eq!(::std::mem::size_of::<ares_in6_addr>() , 16usize);
-    assert_eq!(::std::mem::align_of::<ares_in6_addr>() , 1usize);
-}
 impl Clone for ares_in6_addr {
     fn clone(&self) -> Self { *self }
 }
 #[repr(C)]
-#[derive(Debug, Copy)]
+#[derive(Copy)]
 pub struct ares_addrttl {
     pub ipaddr: in_addr,
     pub ttl: ::std::os::raw::c_int,
 }
-#[test]
-fn bindgen_test_layout_ares_addrttl() {
-    assert_eq!(::std::mem::size_of::<ares_addrttl>() , 8usize);
-    assert_eq!(::std::mem::align_of::<ares_addrttl>() , 4usize);
-}
 impl Clone for ares_addrttl {
     fn clone(&self) -> Self { *self }
 }
@@ -417,11 +405,6 @@
     pub ip6addr: ares_in6_addr,
     pub ttl: ::std::os::raw::c_int,
 }
-#[test]
-fn bindgen_test_layout_ares_addr6ttl() {
-    assert_eq!(::std::mem::size_of::<ares_addr6ttl>() , 20usize);
-    assert_eq!(::std::mem::align_of::<ares_addr6ttl>() , 4usize);
-}
 impl Clone for ares_addr6ttl {
     fn clone(&self) -> Self { *self }
 }
@@ -434,11 +417,6 @@
     pub weight: ::std::os::raw::c_ushort,
     pub port: ::std::os::raw::c_ushort,
 }
-#[test]
-fn bindgen_test_layout_ares_srv_reply() {
-    assert_eq!(::std::mem::size_of::<ares_srv_reply>() , 24usize);
-    assert_eq!(::std::mem::align_of::<ares_srv_reply>() , 8usize);
-}
 impl Clone for ares_srv_reply {
     fn clone(&self) -> Self { *self }
 }
@@ -449,11 +427,6 @@
     pub host: *mut ::std::os::raw::c_char,
     pub priority: ::std::os::raw::c_ushort,
 }
-#[test]
-fn bindgen_test_layout_ares_mx_reply() {
-    assert_eq!(::std::mem::size_of::<ares_mx_reply>() , 24usize);
-    assert_eq!(::std::mem::align_of::<ares_mx_reply>() , 8usize);
-}
 impl Clone for ares_mx_reply {
     fn clone(&self) -> Self { *self }
 }
@@ -464,11 +437,6 @@
     pub txt: *mut ::std::os::raw::c_uchar,
     pub length: usize,
 }
-#[test]
-fn bindgen_test_layout_ares_txt_reply() {
-    assert_eq!(::std::mem::size_of::<ares_txt_reply>() , 24usize);
-    assert_eq!(::std::mem::align_of::<ares_txt_reply>() , 8usize);
-}
 impl Clone for ares_txt_reply {
     fn clone(&self) -> Self { *self }
 }
@@ -480,11 +448,6 @@
     pub length: usize,
     pub record_start: ::std::os::raw::c_uchar,
 }
-#[test]
-fn bindgen_test_layout_ares_txt_ext() {
-    assert_eq!(::std::mem::size_of::<ares_txt_ext>() , 32usize);
-    assert_eq!(::std::mem::align_of::<ares_txt_ext>() , 8usize);
-}
 impl Clone for ares_txt_ext {
     fn clone(&self) -> Self { *self }
 }
@@ -499,11 +462,6 @@
     pub order: ::std::os::raw::c_ushort,
     pub preference: ::std::os::raw::c_ushort,
 }
-#[test]
-fn bindgen_test_layout_ares_naptr_reply() {
-    assert_eq!(::std::mem::size_of::<ares_naptr_reply>() , 48usize);
-    assert_eq!(::std::mem::align_of::<ares_naptr_reply>() , 8usize);
-}
 impl Clone for ares_naptr_reply {
     fn clone(&self) -> Self { *self }
 }
@@ -518,11 +476,6 @@
     pub expire: ::std::os::raw::c_uint,
     pub minttl: ::std::os::raw::c_uint,
 }
-#[test]
-fn bindgen_test_layout_ares_soa_reply() {
-    assert_eq!(::std::mem::size_of::<ares_soa_reply>() , 40usize);
-    assert_eq!(::std::mem::align_of::<ares_soa_reply>() , 8usize);
-}
 impl Clone for ares_soa_reply {
     fn clone(&self) -> Self { *self }
 }
@@ -620,21 +573,9 @@
     pub addr6: __BindgenUnionField<ares_in6_addr>,
     pub bindgen_union_field: [u32; 4usize],
 }
-#[test]
-fn bindgen_test_layout_ares_addr_node__bindgen_ty_1() {
-    assert_eq!(::std::mem::size_of::<ares_addr_node__bindgen_ty_1>() ,
-               16usize);
-    assert_eq!(::std::mem::align_of::<ares_addr_node__bindgen_ty_1>() ,
-               4usize);
-}
 impl Clone for ares_addr_node__bindgen_ty_1 {
     fn clone(&self) -> Self { *self }
 }
-#[test]
-fn bindgen_test_layout_ares_addr_node() {
-    assert_eq!(::std::mem::size_of::<ares_addr_node>() , 32usize);
-    assert_eq!(::std::mem::align_of::<ares_addr_node>() , 8usize);
-}
 impl Clone for ares_addr_node {
     fn clone(&self) -> Self { *self }
 }
@@ -654,21 +595,9 @@
     pub addr6: __BindgenUnionField<ares_in6_addr>,
     pub bindgen_union_field: [u32; 4usize],
 }
-#[test]
-fn bindgen_test_layout_ares_addr_port_node__bindgen_ty_1() {
-    assert_eq!(::std::mem::size_of::<ares_addr_port_node__bindgen_ty_1>() ,
-               16usize);
-    assert_eq!(::std::mem::align_of::<ares_addr_port_node__bindgen_ty_1>() ,
-               4usize);
-}
 impl Clone for ares_addr_port_node__bindgen_ty_1 {
     fn clone(&self) -> Self { *self }
 }
-#[test]
-fn bindgen_test_layout_ares_addr_port_node() {
-    assert_eq!(::std::mem::size_of::<ares_addr_port_node>() , 40usize);
-    assert_eq!(::std::mem::align_of::<ares_addr_port_node>() , 8usize);
-}
 impl Clone for ares_addr_port_node {
     fn clone(&self) -> Self { *self }
 }
