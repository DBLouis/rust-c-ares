--- src/ffi.orig.rs	2015-10-24 10:45:03.289139469 +0100
+++ src/ffi.rs	2015-10-24 10:41:30.663802401 +0100
@@ -1,9 +1,32 @@
+use libc::{
+    in_addr,
+    size_t,
+    sockaddr,
+    socklen_t,
+    timeval,
+};
+
+#[cfg(windows)]
+use std::os::windows::io::RawSocket;
+#[cfg(unix)]
+use std::os::unix::io::RawFd;
+
+#[cfg(windows)]
+use winapi::winsock2::fd_set;
+
+pub type Struct_in_addr = in_addr;
+pub type Struct_sockaddr = sockaddr;
+pub type Struct_timeval = timeval;
+
 /* automatically generated by rust-bindgen */
 
 pub type ares_socklen_t = socklen_t;
 pub type __cares_rule_02__ = [::libc::c_char; 1usize];
 pub type __cares_rule_03__ = [::libc::c_char; 1usize];
-pub type ares_socket_t = ::libc::c_int;
+#[cfg(windows)]
+pub type ares_socket_t = RawSocket;
+#[cfg(unix)]
+pub type ares_socket_t = RawFd;
 pub type ares_sock_state_cb =
     ::std::option::Option<unsafe extern "C" fn(data: *mut ::libc::c_void,
                                                socket_fd: ares_socket_t,
@@ -282,6 +305,7 @@
                             salen: ares_socklen_t, flags: ::libc::c_int,
                             callback: ares_nameinfo_callback,
                             arg: *mut ::libc::c_void) -> ();
+    #[cfg(windows)]
     pub fn ares_fds(channel: *const Struct_ares_channeldata,
                     read_fds: *mut fd_set, write_fds: *mut fd_set)
      -> ::libc::c_int;
@@ -290,6 +314,7 @@
      -> ::libc::c_int;
     pub fn ares_timeout(channel: ares_channel, maxtv: *mut Struct_timeval,
                         tv: *mut Struct_timeval) -> *mut Struct_timeval;
+    #[cfg(windows)]
     pub fn ares_process(channel: ares_channel, read_fds: *mut fd_set,
                         write_fds: *mut fd_set) -> ();
     pub fn ares_process_fd(channel: ares_channel, read_fd: ares_socket_t,
